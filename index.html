<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ===== META / HEAD ===== -->
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>DOGECASH — The Underdog Returns</title>
  <meta name="description" content="Dogecash relaunch: downloads, exchanges, live markets, learn tabs, developer docs, specs, and timeline."/>

  <!-- Open Graph -->
  <meta property="og:title" content="DOGECASH — The Underdog Returns"/>
  <meta property="og:description" content="Native blockchain coin • community-first relaunch with transparent governance."/>
  <meta property="og:type" content="website"/>
  <meta property="og:image" content="https://dogecash.io/og.png"/>
  <meta property="og:image:width" content="1200"/>
  <meta property="og:image:height" content="630"/>
  <meta property="og:url" content="https://dogecash.io/"/>
  <meta property="og:site_name" content="DogeCash"/>

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="DOGECASH — The Underdog Returns"/>
  <meta name="twitter:description" content="Native blockchain coin • community-first relaunch with transparent governance."/>
  <meta name="twitter:image" content="https://dogecash.io/og.png"/>

  <!-- Theme / color scheme -->
  <meta name="theme-color" content="#0b1220" media="(prefers-color-scheme: dark)"/>
  <meta name="theme-color" content="#f4f7ff" media="(prefers-color-scheme: light)"/>
  <meta name="color-scheme" content="dark light"/>

  <!-- PWA / Manifest -->
  <link rel="manifest" href="site.webmanifest" crossorigin="use-credentials"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="default"/>

  <!-- Canonical / SEO -->
  <link rel="canonical" href="https://dogecash.io/"/>
  <meta name="robots" content="index,follow"/>
  <meta name="referrer" content="strict-origin-when-cross-origin"/>

  <!-- Content Security Policy (updated to allow jsdelivr for particles.js) -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    img-src 'self' data: https://assets.coingecko.com https://static.coingecko.com https://dogecash.io;
    connect-src 'self' https://api.coingecko.com https://www.coingecko.com https://coingecko.com;
    script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
    style-src 'self' 'unsafe-inline';
    font-src 'self' data:;
    frame-src 'self';
    base-uri 'self';
    form-action 'self';">

  <!-- Performance hints -->
  <link rel="preconnect" href="https://api.coingecko.com" crossorigin>
  <link rel="dns-prefetch" href="https://api.coingecko.com"/>
  <link rel="icon" href="assets/DogecashLogo.png" type="image/png"/>
  <link rel="prefetch" as="document" href="DogeCash_WhitePaper.pdf" type="application/pdf"/>

  <!-- ===== THEME / BASE STYLES (merged + enhanced) ===== -->
  <style>
    :root{
      --bg:#0b1220; --bg-soft:#111a33; --text:#e6eef6; --muted:#a9b4c6;
      --accent:#ffb86b; --accent-2:#6bdcff; --card:rgba(255,255,255,.03);
      --border:rgba(255,255,255,.08); --shadow:0 6px 18px rgba(0,0,0,.25);
      --good:#19c37d; --bad:#ff6b6b; --on-accent:#10131a;
      --focus: 2px solid #1b67ff;
    }
    :root.light{
      --bg:#f4f7ff; --bg-soft:#ffffff; --text:#0a1326; --muted:#3b4a61;
      --accent:#1b67ff; --accent-2:#2f7dff; --card:#ffffff; --border:#b7c6ff;
      --shadow:0 8px 22px rgba(27,103,255,.12); --good:#0b7a53; --bad:#b23838; --on-accent:#ffffff;
    }
    @media (prefers-contrast: more){
      :root{ --border:#8aa6ff; }
      .btn-ghost, .tabbtn, .badge { border-width:2px }
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline; text-underline-offset:2px}

    /* Animated gradient header + particle layer */
    .header-wrap {
      position: relative;
      overflow: hidden;
      background: linear-gradient(-45deg, #6bdcff, #ffb86b, #0d1326, #0b1220);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      border-bottom:1px solid var(--border);
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    #particles-js {
      position: absolute; inset: 0; z-index: 0; pointer-events: none;
    }

    header{max-width:1100px;margin:auto;padding:28px 20px;display:flex;align-items:center;gap:18px; position:relative; z-index:1;
      backdrop-filter: blur(10px);
      background-color: rgba(11, 18, 32, 0.45);
      border-radius: 0 0 16px 16px;
      transition: background-color .3s ease;
    }
    :root.light header{ background-color: rgba(255,255,255,0.65); }
    .brand-mark{height:64px;width:64px;border-radius:14px;box-shadow:var(--shadow);background:#0b1220; transition: transform 1s ease;}
    #logoImg:hover { transform: rotateY(360deg); }
    .branding h1{margin:0 0 6px 0;letter-spacing:.2px}
    .branding p{margin:0;color:var(--muted)}
    .header-actions{margin-left:auto;display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:rgba(255,255,255,.04)}
    :root.light .badge{ background: rgba(27,103,255,.08); border-color: var(--border); }

    .theme-toggle{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);border-radius:999px;padding:6px 10px;background:var(--card);cursor:pointer}
    .theme-toggle input{accent-color:var(--accent)}

    main, footer{max-width:1100px;margin:auto;padding:20px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:18px;margin:16px 0;box-shadow:var(--shadow); transition: transform .2s ease, border-color .2s ease;}
    .card:hover { transform: scale(1.01); border-color: var(--accent); }
    h2{margin:0 0 12px 0}
    .muted{color:var(--muted)}

    .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:var(--accent);color:var(--on-accent);font-weight:700;border:1px solid transparent; transition: transform .2s, box-shadow .2s;}
    .btn:hover, .btn:focus-visible { box-shadow: 0 0 12px rgba(255,184,107,.6); transform: translateY(-1px); }
    .btn-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .btn-ghost{display:inline-block;padding:10px 14px;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--text)}
    .btn-ghost:hover, .btn-ghost:focus-visible{ background: rgba(27,103,255,.12); border-color: var(--accent); }

    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}
    @media (max-width:900px){.grid-2,.grid-3{grid-template-columns:1fr}}

    .kv{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
    .kv .pill{background:rgba(255,255,255,.04);border:1px solid var(--border);padding:10px 12px;border-radius:10px;min-width:160px}
    :root.light .kv .pill{ background:#f7f9ff; border-color: var(--border); }
    .good{color:var(--good)} .bad{color:var(--bad)}

    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:10px;border-bottom:1px solid var(--border);text-align:left}
    :root.light .table tbody tr:nth-child(odd){ background:#f6f9ff; }

    .img-frame{border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#0f1626;box-shadow:var(--shadow)}
    :root.light .img-frame{ background:#e7efff }
    .img-frame img{display:block;width:100%;height:auto; transition: transform .5s ease;}
    .img-frame:hover img { transform: scale(1.03); }

    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 12px}
    .tabbtn{padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:rgba(255,255,255,.04);cursor:pointer}
    :root.light .tabbtn{ background:#f7f9ff; }
    .tabbtn.active{
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: var(--on-accent);
      border-color: transparent;
      transform: scale(1.05);
      box-shadow: 0 0 10px rgba(27,103,255,0.3);
    }
    .panel{display:none; opacity:0; transform: translateY(10px); transition: opacity .3s ease, transform .3s ease;}
    .panel.active{display:block; opacity:1; transform: translateY(0);}

    .notice{font-size:.9rem;padding:10px;border:1px dashed var(--border);border-radius:10px}
    :root.light .notice{ background:#f6f9ff; }

    footer{color:var(--muted);text-align:center;padding-bottom:40px}
    .tiny{height:18px;width:18px;vertical-align:-3px;border-radius:4px}

    .blog-list .post{border-left:3px solid var(--accent);padding-left:10px;margin:12px 0}
    .blog-list .post time{display:block;color:var(--muted);font-size:.9rem}

    .trust-badge{display:inline-block;font-size:.8rem;padding:.1rem .5rem;border-radius:.5rem;border:1px solid var(--border)}
    .trust-badge.green{background:rgba(25,195,125,.12)}
    .trust-badge.yellow{background:rgba(255,184,107,.12)}
    .trust-badge.red{background:rgba(255,107,107,.12)}

    .visually-hidden { position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

    :focus-visible { outline: var(--focus); outline-offset: 2px; }
    .tabbtn:focus-visible, .btn:focus-visible, .theme-toggle:focus-visible { box-shadow: 0 0 0 3px rgba(27,103,255,.45); }

    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
      html { scroll-behavior: auto; }
    }

    @media (prefers-color-scheme: light) {
      :root:not(.light):not(.dark) {
        --bg:#f4f7ff; --bg-soft:#ffffff; --text:#0a1326; --muted:#3b4a61;
        --accent:#1b67ff; --accent-2:#2f7dff; --card:#ffffff; --border:#b7c6ff;
        --shadow:0 8px 22px rgba(27,103,255,.12); --on-accent:#ffffff;
      }
    }

    .whitepaper-frame { border:1px solid var(--border); border-radius:10px; }
    .api-status { margin-top:8px; font-size:.9rem; color:var(--muted); }
    .api-status.bad { color: var(--bad); }

    .copied { outline: 2px solid var(--good); outline-offset: 2px; border-radius: 6px; }

    /* Share buttons */
    #share .btn-ghost { display:inline-flex; align-items:center; gap:8px; transition: color .2s, border-color .2s, background-color .2s; }
    #share svg { width:18px; height:18px; flex:0 0 18px; display:inline-block; }
    #share .share-row { display:flex; flex-wrap:wrap; gap:8px; }
    #share #share-facebook:hover, #share #share-facebook:focus-visible { color:#1877F2; border-color:currentColor; background-color:rgba(24,119,242,.10); }
    #share #share-twitter:hover,  #share #share-twitter:focus-visible  { color:#1D9BF0; border-color:currentColor; background-color:rgba(29,155,240,.12); }
    #share #share-instagram:hover,#share #share-instagram:focus-visible{ color:#E4405F; border-color:currentColor; background-color:rgba(228,64,95,.12); }
    #share #share-tiktok:hover,   #share #share-tiktok:focus-visible   { color:#FE2C55; border-color:currentColor; background-color:rgba(254,44,85,.12); }
    #share #share-telegram:hover, #share #share-telegram:focus-visible { color:#26A5E4; border-color:currentColor; background-color:rgba(38,165,228,.12); }
    #share #share-whatsapp:hover, #share #share-whatsapp:focus-visible { color:#25D366; border-color:currentColor; background-color:rgba(37,211,102,.12); }

    /* Getting Started & Tutorials */
    .gs-steps { padding-left:18px; }
    .gs-steps > li { margin:10px 0; }
    .gs-steps h3 { margin:0 0 6px 0; }
    pre { background:var(--bg-soft); border:1px solid var(--border); border-radius:8px; padding:8px; overflow:auto; }

    .tutorial-card{border:1px solid var(--border); border-radius:12px; overflow:hidden; background:var(--bg-soft)}
    .tutorial-card .ph{display:block; width:100%; height:auto}
    .tutorial-card .bar{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px; background:var(--card); border-top:1px solid var(--border)}
    .tutorial-card .btn-mini{padding:8px 12px; border-radius:8px; background:var(--accent); color:var(--on-accent); font-weight:700; border:0; cursor:pointer}

    /* Meme gallery */
    .meme-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(180px,1fr)); gap:12px; }
    .meme-grid .m { border:1px solid var(--border); border-radius:12px; overflow:hidden; background:var(--bg-soft); cursor:pointer; }
    .meme-grid img { display:block; width:100%; height:auto; }
    .meme-lightbox { position:fixed; inset:0; background:rgba(0,0,0,.7); display:none; align-items:center; justify-content:center; padding:20px; z-index:9999; }
    .meme-lightbox.open { display:flex; animation: popIn .3s ease-out; }
    .meme-lightbox img { max-width:92vw; max-height:88vh; border-radius:12px; }
    @keyframes popIn { from { opacity:0; transform: scale(0.95);} to { opacity:1; transform: scale(1);} }
  </style>
</head>

<body>
  <!-- ===== HEADER / BRANDING ===== -->
  <div class="header-wrap">
    <div id="particles-js"></div>
    <header role="banner">
      <img alt="Dogecash Logo" class="brand-mark" fetchpriority="high" height="64" id="logoImg" src="" width="64"/>
      <div class="branding">
        <h1>DOGECASH — The Underdog Returns</h1>
        <p class="muted">Native blockchain coin • community-first relaunch with transparent governance.</p>
      </div>
      <div class="header-actions">
        <span aria-live="polite" class="badge" id="versionBadge">v5.5.1</span>
        <label class="theme-toggle" title="Toggle theme">
          <input aria-checked="false" aria-label="Toggle light theme" id="themeToggle" role="switch" type="checkbox"/>
          <span>Light theme</span>
        </label>
      </div>
    </header>
  </div>

  <!-- ===== MAIN CONTENT ===== -->
  <main id="main" tabindex="-1" role="main">
    <!-- ===== ANNOUNCEMENT ===== -->
    <div aria-live="polite" class="card notice" role="status">
      Heads up: The DogeCash App ceased services; withdrawal deadlines were March 16–28, 2025.
      See details on the official site:
      <a href="https://dogecash.net/" target="_blank" rel="noopener noreferrer">dogecash.net</a>.
    </div>

    <!-- ===== DOWNLOAD SECTION ===== -->
    <section aria-labelledby="download-h" class="card" id="download">
      <h2 id="download-h">Download DogeCash Wallet</h2>
      <div class="grid-2">
        <div>
          <p class="muted">
            Installer auto-suggested for your OS. Always verify checksums/signatures before running.
          </p>
          <p>
            <a class="btn" href="https://github.com/dogecash/dogecash/releases/tag/5.5.1" id="dlBtn" target="_blank" rel="noopener noreferrer">
              Download for Your OS
            </a>
          </p>
          <p class="muted">
            <small>
              All assets:
              <a href="https://github.com/dogecash/dogecash/releases/tag/5.5.1" id="allAssetsLink" target="_blank" rel="noopener noreferrer">
                GitHub Release
              </a>
            </small>
          </p>

          <!-- Quick links -->
          <div class="btn-row" aria-label="Quick links (downloads)">
            <a class="btn-ghost" href="https://github.com/dogecash/dogecash/releases" target="_blank" rel="noopener noreferrer">GitHub Releases</a>
            <a class="btn-ghost" href="https://www.coingecko.com/en/coins/dogecash" target="_blank" rel="noopener noreferrer">CoinGecko</a>
            <a class="btn-ghost" href="https://coinmarketcap.com/currencies/dogecash/" target="_blank" rel="noopener noreferrer">CoinMarketCap</a>
          </div>

          <!-- Checksums -->
          <details>
            <summary><strong>SHA256 Checksums</strong> (click a hash to copy)</summary>
            <table class="table" id="shaTable">
              <thead>
                <tr><th>File</th><th>SHA256</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>dogecash-5.5.1-win64.zip</td>
                  <td class="muted">5E470328EE68750A2F6E86F75C83CECAEAC2AD973F5573B83DCB6E3156A91591</td>
                </tr>
                <tr>
                  <td>dogecash-5.5.1-osx-unsigned.dmg</td>
                  <td class="muted">A9B2E0AB2F72476CCF5CDB4746ADF9C9D1399321E8E6C02B5F6F47CC924D59B2</td>
                </tr>
                <tr>
                  <td>dogecash-5.5.1-x86_64-linux-gnu.tar.gz</td>
                  <td class="muted">DEAB49107E8930148E24BB922B3BEF6F009E3709D425619FF0044D121D7A02EF</td>
                </tr>
              </tbody>
            </table>
          </details>
        </div>

        <!-- RIGHT COLUMN: Live Price -->
        <div>
          <h3>Live Price</h3>
          <div class="kv" aria-live="polite">
            <div class="pill"><strong>USD</strong><div id="p_usd">—</div></div>
            <div class="pill"><strong>24h</strong><div id="p_ch">—</div></div>
            <div class="pill"><strong>Market Cap</strong><div id="p_mcap">—</div></div>
            <div class="pill"><strong>24h Volume</strong><div id="p_vol">—</div></div>
            <div class="pill"><strong>Circulating</strong><div id="p_circ">—</div></div>
          </div>
          <p class="api-status" id="priceStatus">Fetching price…</p>
          <p class="muted">
            Source: CoinGecko •
            <a href="https://www.coingecko.com/en/coins/dogecash" target="_blank" rel="noopener noreferrer">View on CoinGecko</a>
          </p>
        </div>
      </div>
    </section>

    <!-- ===== SHARE SECTION ===== -->
    <section aria-labelledby="share-heading" class="card" id="share">
      <h2 id="share-heading">Share DOGECASH</h2>
      <p class="muted">
        Spread the word. Links use your current page &amp; title and respect your device’s native share where supported.
      </p>
      <div aria-label="Share buttons" class="share-row" role="group">
        <a aria-label="Share on Facebook" class="btn-ghost" href="#" id="share-facebook" target="_blank" rel="noopener noreferrer">
          <svg aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M22 12.06C22 6.49 17.52 2 11.95 2S2 6.49 2 12.06c0 5.01 3.66 9.16 8.44 9.94v-7.03H7.9v-2.91h2.54V9.41c0-2.5 1.49-3.88 3.77-3.88 1.09 0 2.24.19 2.24.19v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56v1.87h2.77l-.44 2.91h-2.33V22c4.78-.78 8.44-4.93 8.44-9.94Z"/></svg>
          <span>Facebook</span>
        </a>
        <a aria-label="Share on X (Twitter)" class="btn-ghost" href="#" id="share-twitter" target="_blank" rel="noopener noreferrer">
          <svg aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M13.8 10.7 20.9 2h-2.5l-6 7.2L8 2H2l7.6 11.2L2.6 22h2.5l6.5-7.8 4.7 7.8H22l-8.2-11.3Zm-2.3 2.8-.76-1.12L5 3.7h2.1l4.1 6 .76 1.12 6.1 8.9h-2.1l-4.46-6.02Z"/></svg>
          <span>Share on X</span>
        </a>
        <a aria-label="Open Instagram profile" class="btn-ghost" href="https://instagram.com/" id="share-instagram" target="_blank" rel="noopener noreferrer">
          <svg aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7Zm5 3.5A5.5 5.5 0 1 1 6.5 13 5.5 5.5 0 0 1 12 7.5Zm0 2A3.5 3.5 0 1 0 15.5 13 3.5 3.5 0 0 0 12 9.5Zm5.75-3A1.25 1.25 0 1 1 16.5 7.75 1.25 1.25 0 0 1 17.75 6.5Z"/></svg>
          <span>Instagram</span>
        </a>
        <a aria-label="Open TikTok profile" class="btn-ghost" href="https://www.tiktok.com/" id="share-tiktok" target="_blank" rel="noopener noreferrer">
          <svg aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M15 3c.6 1.8 2 3.2 3.8 3.8V10a7 7 0 1 1-7-7h3.2Z"/></svg>
          <span>TikTok</span>
        </a>
        <a aria-label="Share on Telegram" class="btn-ghost" href="#" id="share-telegram" target="_blank" rel="noopener noreferrer">
          <svg aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21.5 3.5 2.7 10.8c-1 .4-.9 1.8.2 2L8.7 14l8.7-7.9c.2-.2.6.1.4.3L10 15.2v4.6c0 1.1 1.3 1.6 2.1.9l3.2-2.8 3.9 1.3c.9.3 1.8-.3 2-1.2l2.3-12.6c.2-1-.7-1.8-1.6-1.5Z"/></svg>
          <span>Telegram</span>
        </a>
        <a aria-label="Share on WhatsApp" class="btn-ghost" href="#" id="share-whatsapp" target="_blank" rel="noopener noreferrer">
          <svg aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M20 3.9A10 10 0 0 0 3.6 17.6L3 21l3.5-.9A10 10 0 1 0 20 3.9Zm-8 .9a8.1 8.1 0 0 1 6.2 13.2c-.3.4-.9.5-1.4.3-.8-.3-1.8-.6-2.7-1-2.9-1.3-5.1-3.5-6.4-6.4-.4-.9-.7-1.9-1-2.7-.2-.5 0-1.1.3-1.4A8.1 8.1 0 0 1 12 4.8Z"/></svg>
          <span>WhatsApp</span>
        </a>
      </div>
    </section>

    <!-- ===== MARKETS ===== -->
    <section aria-labelledby="markets-h" class="card" id="markets">
      <h2 id="markets-h">Where to Trade DOGEC (Live)</h2>
      <div class="notice muted" id="marketsNote">
        Data via CoinGecko tickers. Always verify liquidity, spreads, and official communities before trading.
      </div>
      <div class="btn-row" aria-label="Quick links (markets)">
        <a class="btn" href="https://stakecube.net/app/exchange/doge_btc" target="_blank" rel="noopener noreferrer">StakeCube: DOGEC/BTC</a>
        <a class="btn-ghost" href="https://www.coingecko.com/en/coins/dogecash#markets" target="_blank" rel="noopener noreferrer">CoinGecko Markets</a>
        <a class="btn-ghost" href="https://coinmarketcap.com/currencies/dogecash/markets/" target="_blank" rel="noopener noreferrer">CMC Markets</a>
      </div>

      <table class="table" id="marketsTable" aria-describedby="marketsNote" role="table">
        <caption class="visually-hidden">Live market pairs from CoinGecko</caption>
        <thead>
          <tr>
            <th>Exchange</th>
            <th>Pair</th>
            <th>Price</th>
            <th>Spread</th>
            <th>Trust</th>
            <th>Link</th>
          </tr>
        </thead>
        <tbody aria-live="polite" aria-busy="true">
          <tr><td class="muted" colspan="6">Loading live markets…</td></tr>
        </tbody>
      </table>
      <p class="api-status" id="marketsStatus">Fetching markets…</p>
    </section>

    <!-- ===== WALLET PREVIEW ===== -->
    <section aria-labelledby="wallet-h" class="card" id="wallet">
      <h2 id="wallet-h">Wallet Preview</h2>
      <div class="grid-2">
        <div class="img-frame">
          <img alt="Dogecash Desktop Wallet Preview" fetchpriority="low" height="768" id="walletImg" loading="lazy" src="" width="1365"/>
        </div>
        <div>
          <ul>
            <li><strong>Proof-of-Stake</strong> with unlock-for-staking-only</li>
            <li><strong>Masternodes</strong> &amp; DAO voting</li>
            <li><strong>Transaction history</strong> with filters &amp; memos</li>
            <li><strong>Backups</strong> &amp; wallet encryption</li>
            <li><strong>Diagnostics</strong> &amp; version info</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ===== SPECS ===== -->
    <section aria-labelledby="specs-h" class="card" id="specs">
      <h2 id="specs-h">Coin Specifications</h2>
      <div class="grid-3">
        <div class="pill"><strong>Algorithm</strong><div>Quark</div></div>
        <div class="pill"><strong>Block Time</strong><div>~60 sec</div></div>
        <div class="pill"><strong>Difficulty</strong><div>Retarget every block</div></div>
        <div class="pill"><strong>Total Supply</strong><div>21,000,000 DOGEC</div></div>
        <div class="pill"><strong>Max Supply</strong><div>210,000,000 DOGEC</div></div>
        <div class="pill"><strong>Privacy</strong><div>SHIELD (zk-SNARKs)</div></div>
      </div>
      <p class="muted">Circulating supply is ~18.8M (live via dashboard/CG).</p>
    </section>

    <!-- ===== LEARN ===== -->
    <section aria-labelledby="learn-h" class="card" id="learn">
      <h2 id="learn-h">Learn DOGEC</h2>

      <div class="tabs" id="learnTabs" role="tablist" aria-label="Learn tabs">
        <button role="tab" class="tabbtn active" id="tab-tech" aria-selected="true" aria-controls="tech" data-tab="tech">Technology</button>
        <button role="tab" class="tabbtn" id="tab-staking" aria-selected="false" aria-controls="staking" data-tab="staking">Staking</button>
        <button role="tab" class="tabbtn" id="tab-masternodes" aria-selected="false" aria-controls="masternodes" data-tab="masternodes">Masternodes</button>
        <button role="tab" class="tabbtn" id="tab-gov" aria-selected="false" aria-controls="gov" data-tab="gov">Governance</button>
        <button role="tab" class="tabbtn" id="tab-econ" aria-selected="false" aria-controls="econ" data-tab="econ">Economics</button>
        <button role="tab" class="tabbtn" id="tab-roadmap" aria-selected="false" aria-controls="roadmap" data-tab="roadmap">Roadmap</button>
        <button role="tab" class="tabbtn" id="tab-faq" aria-selected="false" aria-controls="faq" data-tab="faq">FAQ</button>
        <button role="tab" class="tabbtn" id="tab-whitepaper" aria-selected="false" aria-controls="whitepaper" data-tab="whitepaper">White Paper</button>
      </div>

      <!-- Panels -->
      <div class="panel active" id="tech" role="tabpanel" aria-labelledby="tab-tech" tabindex="0">
        <div class="grid-2">
          <div>
            <h3>Privacy &amp; Protocol</h3>
            <ul>
              <li><strong>SHIELD (Sapling/zk-SNARKs):</strong> optional privacy for amounts &amp; receivers.</li>
              <li><strong>Consensus:</strong> Proof-of-Stake v3 with ~60s blocks.</li>
              <li><strong>Network:</strong> Full nodes + Masternodes provide services and resilience.</li>
              <li><strong>Wallet:</strong> Qt desktop with encrypt/backup, unlock-for-staking, rich history.</li>
            </ul>
          </div>
          <div>
            <h3>Developer Stack</h3>
            <ul>
              <li>Core C++/Qt: <a href="https://github.com/dogecash/dogecash" target="_blank" rel="noopener noreferrer">dogecash/dogecash</a></li>
              <li>Explorer (JS+Mongo): <a href="https://github.com/dogecash/dogecash-explorer" target="_blank" rel="noopener noreferrer">dogecash-explorer</a></li>
              <li>Web Wallet: <a href="https://github.com/dogecash/dogecash-web-wallet" target="_blank" rel="noopener noreferrer">dogecash-web-wallet</a></li>
              <li>Electrum Server (Rust): <a href="https://github.com/dogecash/electrs-dogecash" target="_blank" rel="noopener noreferrer">electrs-dogecash</a></li>
            </ul>
          </div>
        </div>
      </div>

      <div class="panel" id="staking" role="tabpanel" aria-labelledby="tab-staking" tabindex="-1">
        <div class="grid-2">
          <div>
            <h3>How Staking Works</h3>
            <ul>
              <li>Encrypt wallet → Unlock <strong>for staking only</strong>.</li>
              <li>Keep wallet online &amp; fully synced; rewards are probabilistic.</li>
              <li>Coins must mature; moving coins resets coin-age.</li>
            </ul>
          </div>
          <div>
            <h3>Checklist</h3>
            <ul>
              <li>✔ Full sync</li>
              <li>✔ Backup <code>wallet.dat</code></li>
              <li>✔ Staking icon active</li>
              <li>✔ Stable connection</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="panel" id="masternodes" role="tabpanel" aria-labelledby="tab-masternodes" tabindex="-1">
        <div class="grid-2">
          <div>
            <h3>What They Do</h3>
            <ul>
              <li>Provide network services &amp; governance voting.</li>
              <li>Improve uptime and stability.</li>
            </ul>
          </div>
          <div>
            <h3>High-Level Setup</h3>
            <ol>
              <li>Prepare collateral address in controller wallet.</li>
              <li>Run <code>dogecashd</code> on a VPS with static IP.</li>
              <li>Create <code>masternode.conf</code>, start from controller wallet.</li>
              <li>Monitor with <code>dogecash-cli masternode status</code>.</li>
            </ol>
          </div>
        </div>
      </div>

      <div class="panel" id="gov" role="tabpanel" aria-labelledby="tab-gov" tabindex="-1">
        <div class="grid-2">
          <div>
            <h3>DAO Process</h3>
            <ul>
              <li>Publish proposals (scope/budget/milestones).</li>
              <li>Masternodes vote on-chain.</li>
              <li>Treasury pays approved work.</li>
            </ul>
          </div>
          <div>
            <h3>Transparency Rules</h3>
            <ul>
              <li>Community multisig treasury wallets.</li>
              <li>Monthly public reports &amp; signer rotation.</li>
              <li>Open notes &amp; GitHub issues for proposals.</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="panel" id="econ" role="tabpanel" aria-labelledby="tab-econ" tabindex="-1">
        <div class="grid-2">
          <div>
            <h3>Specs</h3>
            <ul>
              <li>Algorithm: Quark • Block time: ~60s</li>
              <li>Difficulty: retarget per block</li>
              <li>Total supply: 21,000,000 DOGEC</li>
              <li>Max supply: 210,000,000 DOGEC</li>
            </ul>
          </div>
          <div>
            <h3>Incentives</h3>
            <ul>
              <li>Staking rewards for online, unlocked wallets.</li>
              <li>Masternode rewards for uptime + governance.</li>
              <li>DAO budget funds growth &amp; infrastructure.</li>
            </ul>
          </div>
        </div>
        <p class="muted">Circulating supply ~18.8M (live via dashboard/CG).</p>
      </div>

      <div class="panel" id="roadmap" role="tabpanel" aria-labelledby="tab-roadmap" tabindex="-1">
        <div class="grid-2">
          <div>
            <h3>Q3–Q4 2025</h3>
            <ul>
              <li>Public block explorer &amp; API endpoints</li>
              <li>Discord/X tipping bots</li>
              <li>Community multisig treasury</li>
              <li>Re-listing push on vetted exchanges/DEX bridges</li>
            </ul>
          </div>
          <div>
            <h3>2026</h3>
            <ul>
              <li>SHIELD UX hardening &amp; audits</li>
              <li>Wallet UX: auto-updates, recovery flows</li>
              <li>Mobile light clients (Electrum)</li>
            </ul>
          </div>
        </div>
        <p class="muted">Roadmap is community-driven via DAO votes.</p>
      </div>

      <div class="panel" id="faq" role="tabpanel" aria-labelledby="tab-faq" tabindex="-1">
        <details><summary><strong>Is DogeCash a token?</strong></summary><p>No — DOGEC is a native coin with its own blockchain (not an ERC-20 token).</p></details>
        <details><summary><strong>Where do I get the wallet?</strong></summary><p>From the official GitHub releases. Use the OS auto-detect button and verify SHA256.</p></details>
        <details><summary><strong>How do I stake?</strong></summary><p>Encrypt, then unlock “for staking only,” keep the wallet online and synced.</p></details>
        <details><summary><strong>How is the treasury protected?</strong></summary><p>Community multisig, public reports, open voting, and no single-party custody.</p></details>
      </div>

      <div class="panel" id="whitepaper" role="tabpanel" aria-labelledby="tab-whitepaper" tabindex="-1">
        <div class="grid-2">
          <div>
            <h3>DogeCash White Paper</h3>
            <p>View the complete DogeCash white paper below or download it for offline reading.</p>
            <p><a class="btn" href="DogeCash_WhitePaper.pdf" target="_blank" rel="noopener noreferrer">Download PDF</a></p>
          </div>
          <div>
            <iframe class="whitepaper-frame" src="DogeCash_WhitePaper.pdf" width="100%" height="500" title="DogeCash White Paper" loading="lazy" referrerpolicy="no-referrer"></iframe>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== GETTING STARTED ===== -->
    <section aria-labelledby="start-here-h" class="card" id="start-here">
      <h2 id="start-here-h">Start Here</h2>
      <ol class="gs-steps">
        <li>
          <h3>1) Download the Wallet</h3>
          <p>Use the button above (“Download for Your OS”).</p>
        </li>
        <li>
          <h3>2) Verify the Checksum</h3>
          <details>
            <summary>Show commands for Windows / macOS / Linux</summary>
            <div class="grid-3">
              <div><strong>Windows (PowerShell)</strong><pre><code>Get-FileHash .\dogecash-5.5.1-win64.zip -Algorithm SHA256</code></pre></div>
              <div><strong>macOS</strong><pre><code>shasum -a 256 dogecash-5.5.1-osx-unsigned.dmg</code></pre></div>
              <div><strong>Linux</strong><pre><code>sha256sum dogecash-5.5.1-x86_64-linux-gnu.tar.gz</code></pre></div>
            </div>
            <p class="muted">Compare output with the hashes in the Downloads section.</p>
          </details>
        </li>
        <li>
          <h3>3) Get Your First DOGEC</h3>
          <p>Acquire on a listed exchange (see Markets), then withdraw to your wallet.</p>
        </li>
        <li>
          <h3>4) Stake or Run a Masternode</h3>
          <p>Open the wallet → Encrypt → Unlock <em>for staking only</em>. For masternodes, follow the Learn → Masternodes setup.</p>
        </li>
      </ol>
    </section>

    <!-- ===== TUTORIALS ===== -->
    <section aria-labelledby="tutorials-h" class="card" id="tutorials">
      <h2 id="tutorials-h">Video Tutorials</h2>
      <div class="grid-2">
        <div class="tutorial-card">
          <img alt="Tutorial coming soon: Install &amp; Verify" class="ph" loading="lazy" src="assets/tutorial-install.svg"/>
          <div class="bar">
            <span>Install &amp; Verify</span>
            <button class="btn-mini" data-tutorial="install" type="button">Play</button>
          </div>
        </div>
        <div class="tutorial-card">
          <img alt="Tutorial coming soon: Staking Basics" class="ph" loading="lazy" src="assets/tutorial-stake.svg"/>
          <div class="bar">
            <span>Staking Basics</span>
            <button class="btn-mini" data-tutorial="stake" type="button">Play</button>
          </div>
        </div>
      </div>
      <p class="muted">Videos coming soon. For now, the buttons show a quick note.</p>
    </section>

    <!-- ===== MEMES ===== -->
    <section aria-labelledby="memes-h" class="card" id="memes">
      <h2 id="memes-h">Community Memes</h2>
      <p class="muted">Want your meme featured? Share it in Discord — we periodically add the best here.</p>
      <div class="meme-grid" id="memeGrid" aria-live="polite"></div>
    </section>

    <!-- ===== BLOG ===== -->
    <section aria-labelledby="blog-h" class="card" id="blog">
      <h2 id="blog-h">Blog &amp; Updates</h2>
      <div class="blog-list" id="blogList">
        <div class="muted">Loading posts…</div>
      </div>
      <p class="api-status" id="blogStatus">Fetching posts…</p>

      <!-- Blog fallback data -->
      <script id="blog-inline" type="application/json">
        [
          {"title":"Relaunch Checklist — Week 1","summary":"Site live with downloads, live markets, Learn tabs, and theme toggle.","date":"2025-08-10"},
          {"title":"Next Up — Explorer & Tipping","summary":"Hosting public explorer endpoints and DOGEC tipping bots for Discord/X.","date":"2025-08-12"}
        ]
      </script>
    </section>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer>
    <p>
      <img alt="Dogecash logo" class="tiny" height="18" id="tinyLogo" width="18"/>
      Join the community:
      <a href="https://discord.gg/your-invite" target="_blank" rel="noopener noreferrer">Discord</a>
    </p>
    <p class="muted">
      © 2025 DogeCash Community — Always verify downloads and addresses before transacting.
    </p>
  </footer>

  <!-- ===== SCRIPTS ===== -->

  <!-- Particles.js (allowed by CSP) -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js" defer></script>

  <!-- App logic -->
  <script>
    // ===== Version / assets =====
    const VERSION = '5.5.1';
    const LOGO_SRC   = "";   // optional data: URL
    const WALLET_SRC = "";   // optional data: URL
    const FALLBACK_SVG = encodeURIComponent(`
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64' aria-hidden='true' role='img'>
        <defs><linearGradient id='g' x1='0' x2='1' y1='0' y2='1'>
          <stop offset='0' stop-color='#6bdcff'/><stop offset='1' stop-color='#ffb86b'/>
        </linearGradient></defs>
        <rect width='64' height='64' rx='14' fill='#0b1220'/>
        <circle cx='32' cy='32' r='22' fill='url(#g)' opacity='0.25'/>
        <text x='32' y='38' font-family='system-ui,Segoe UI,Roboto,Arial' font-size='14' text-anchor='middle' fill='#e6eef6'>DOGEC</text>
      </svg>
    `);
    const PLACEHOLDER_DATA_SVG = `data:image/svg+xml;utf8,${FALLBACK_SVG}`;
    const OG_IMAGE = "https://dogecash.io/og.png";

    // ===== Helpers =====
    function pickSrc(){ for (const c of arguments){ if (c) return c; } return ""; }
    function probe(url){
      return new Promise(res=>{
        if(!url) return res(false);
        const i = new Image();
        i.onload = ()=>res(true);
        i.onerror = ()=>res(false);
        i.src = url;
      });
    }
    const q = (s, r=document) => r.querySelector(s);
    const qa = (s, r=document) => Array.from(r.querySelectorAll(s));
    async function delay(ms){ return new Promise(r=>setTimeout(r,ms)); }
    function setStatus(id, msg, bad=false){ const el=document.getElementById(id); if (el){ el.textContent=msg; el.classList.toggle('bad', !!bad);} }

    // Cache-aware fetch
    async function getJSON(url, { ttlMs = 60_000, key = url, retries = 1, backoffMs = 800 } = {}) {
      const now = Date.now();
      try { const cached = JSON.parse(sessionStorage.getItem(key) || 'null'); if (cached && (now - cached.t) < ttlMs) return cached.v; } catch {}
      let lastErr;
      for (let attempt = 0; attempt <= retries; attempt++) {
        const ac = new AbortController(); const to = setTimeout(()=>ac.abort(), 12000);
        try {
          const r = await fetch(url, { cache:'no-store', signal: ac.signal, mode:'cors', credentials:'omit' });
          if (!r.ok) throw new Error('HTTP '+r.status);
          const v = await r.json(); try { sessionStorage.setItem(key, JSON.stringify({ t: now, v })); } catch {}
          clearTimeout(to); return v;
        } catch (e) { lastErr = e; clearTimeout(to); if (attempt < retries) await delay(backoffMs * (attempt+1)); }
      }
      try { const cached = JSON.parse(sessionStorage.getItem(key) || 'null'); if (cached) return cached.v; } catch {}
      throw lastErr;
    }

    // ===== Progressive images + favicon =====
    (async function initImages(){
      const logoEl   = q('#logoImg');
      const tinyEl   = q('#tinyLogo');
      const walletEl = q('#walletImg');

      const logoCandidates = [
        LOGO_SRC && LOGO_SRC.startsWith('data:') ? LOGO_SRC : "",
        'assets/DogecashLogo.png',
        OG_IMAGE,
        PLACEHOLDER_DATA_SVG
      ];
      const walletCandidates = [
        WALLET_SRC && WALLET_SRC.startsWith('data:') ? WALLET_SRC : "",
        'assets/DogecashWalletPreview.png',
        OG_IMAGE,
        PLACEHOLDER_DATA_SVG
      ];

      let logoSrc="", walletSrc="";
      for (const c of logoCandidates){ if (await probe(c)) { logoSrc = c; break; } }
      for (const c of walletCandidates){ if (await probe(c)) { walletSrc = c; break; } }

      if (logoEl)  logoEl.src = pickSrc(logoSrc, PLACEHOLDER_DATA_SVG);
      if (tinyEl)  tinyEl.src = pickSrc(logoSrc, PLACEHOLDER_DATA_SVG);
      if (walletEl) walletEl.src = pickSrc(walletSrc, PLACEHOLDER_DATA_SVG);

      const fav = document.createElement('link');
      fav.rel = 'icon';
      fav.type = 'image/png';
      fav.href = pickSrc(
        (logoSrc && logoSrc.startsWith('data:')) ? logoSrc : "",
        'assets/DogecashLogo.png',
        OG_IMAGE,
        PLACEHOLDER_DATA_SVG
      );
      document.head.appendChild(fav);

      const vb = q('#versionBadge');
      if (vb) vb.textContent = 'v' + VERSION;
    })();

    // ===== Theme toggle =====
    const root = document.documentElement;
    const prefersLight = window.matchMedia?.('(prefers-color-scheme: light)').matches;
    const savedTheme = localStorage.getItem('dogec-theme') || '';
    const applyTheme = (mode) => {
      root.classList.remove('light','dark'); root.classList.add(mode);
      const cb = q('#themeToggle');
      if (cb) {
        const isLight = mode === 'light';
        cb.checked = isLight;
        cb.setAttribute('aria-checked', String(isLight));
        cb.setAttribute('aria-label', isLight ? 'Switch to dark theme' : 'Switch to light theme');
      }
    };
    applyTheme(savedTheme || (prefersLight ? 'light' : 'dark'));
    q('#themeToggle')?.addEventListener('change', e => {
      const mode = e.target.checked ? 'light' : 'dark';
      localStorage.setItem('dogec-theme', mode); applyTheme(mode);
    });

    // ===== Tabs (a11y & keyboard) =====
    function setActiveTab(btn, focusTarget = 'none') {
      const id = btn.dataset.tab;
      const panel = q('#'+id);
      qa('#learn .tabbtn').forEach(b => { b.classList.remove('active'); b.setAttribute('aria-selected','false'); b.setAttribute('tabindex','-1'); });
      qa('#learn .panel').forEach(p => { p.classList.remove('active'); p.setAttribute('tabindex','-1'); });
      btn.classList.add('active'); btn.setAttribute('aria-selected','true'); btn.setAttribute('tabindex','0');
      if (panel) { panel.classList.add('active'); panel.setAttribute('tabindex','0'); }
      if (focusTarget === 'tab') btn.focus({ preventScroll:true });
      else if (focusTarget === 'panel' && panel) panel.focus({ preventScroll:true });
    }
    function initTabs(){
      const activeBtn = q('#learn .tabbtn.active') || q('#learn .tabbtn');
      if (activeBtn) setActiveTab(activeBtn, 'none');
      const tabs = qa('#learn .tabbtn');
      tabs.forEach((btn, idx) => {
        btn.addEventListener('click', () => setActiveTab(btn, 'tab'));
        btn.addEventListener('keydown', e => {
          if (e.key === 'ArrowRight') { e.preventDefault(); tabs[(idx+1)%tabs.length].click(); }
          else if (e.key === 'ArrowLeft') { e.preventDefault(); tabs[(idx-1+tabs.length)%tabs.length].click(); }
          else if (e.key === 'Home') { e.preventDefault(); tabs[0].click(); }
          else if (e.key === 'End') { e.preventDefault(); tabs[tabs.length-1].click(); }
        });
      });
    }
    document.addEventListener('DOMContentLoaded', initTabs, { once:true });

    // ===== Download auto-detect =====
    const releaseTagUrl = `https://github.com/dogecash/dogecash/releases/tag/${VERSION}`;
    const releaseBase   = `https://github.com/dogecash/dogecash/releases/download/${VERSION}/`;
    const assets = {
      win:       `dogecash-${VERSION}-win64.zip`,
      macIntel:  `dogecash-${VERSION}-osx-unsigned.dmg`,
      macArm:    `dogecash-${VERSION}-osx-unsigned.dmg`,
      linux:     `dogecash-${VERSION}-x86_64-linux-gnu.tar.gz`
    };
    (function(){
      const ua = navigator.userAgent;
      const isWin   = /Windows NT|Win64/i.test(ua);
      const isMac   = /Macintosh|Mac OS X/i.test(ua);
      const isLinux = /Linux|X11|Ubuntu|Fedora|Debian|Arch|Manjaro/i.test(ua);
      const isArm   = /\b(aarch64|arm64|Apple\s?Silicon)\b/i.test(ua);
      const isMobile = /Android|iPhone|iPad|Mobile/i.test(ua);
      let href = releaseTagUrl, label = 'Download for Your OS';
      if (!isMobile) {
        if (isWin) { href = releaseBase + assets.win; label = 'Download for Windows'; }
        else if (isMac) { href = releaseBase + (isArm ? assets.macArm : assets.macIntel); label = 'Download for macOS'; }
        else if (isLinux) { href = releaseBase + assets.linux; label = 'Download for Linux'; }
      } else { label = 'View All Desktop Downloads'; }
      const btn = q('#dlBtn'); if (btn) { btn.href = href; btn.textContent = label; btn.rel = 'noopener noreferrer'; }
      const all = q('#allAssetsLink'); if (all) all.href = releaseTagUrl;
    })();

    // ===== CoinGecko dashboard + markets =====
    const SAVE_DATA = navigator.connection?.saveData === true;
    const base='https://api.coingecko.com/api/v3', id='dogecash';
    const fmtUSD = (n, {maxFrac=4}={}) => (n==null ? '—' : new Intl.NumberFormat(undefined, { style:'currency', currency:'USD', maximumFractionDigits:maxFrac }).format(n));
    const fmtNum = (n, {maxFrac=2}={}) => (n==null ? '—' : new Intl.NumberFormat(undefined, { maximumFractionDigits:maxFrac }).format(n));

    async function loadDashboard(){
      if (document.hidden || !navigator.onLine) return;
      try{
        let d;
        try {
          setStatus('priceStatus','Fetching price…');
          d = await getJSON(`${base}/coins/${id}?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false`, { ttlMs: 60_000, retries: 2 });
        } catch {
          setStatus('priceStatus','Retrying (simple price)…');
          const sp = await getJSON(`${base}/simple/price?ids=${encodeURIComponent(id)}&vs_currencies=usd&include_24hr_change=true`, { ttlMs: 60_000 });
          const mchart = await getJSON(`${base}/coins/${id}?localization=false&tickers=false&market_data=true&sparkline=false`, { ttlMs: 120_000, retries: 1 });
          d = { market_data: { current_price: { usd: sp?.[id]?.usd ?? null }, price_change_percentage_24h: sp?.[id]?.usd_24h_change ?? null }, _extra: mchart?.market_data || {} };
        }

        const md = d.market_data || {};
        const price = md.current_price?.usd ?? d?._extra?.current_price?.usd ?? null;
        const ch = (typeof md.price_change_percentage_24h === 'number' ? md.price_change_percentage_24h : null) ?? d?._extra?.price_change_percentage_24h ?? null;
        const cap = md.market_cap?.usd ?? d?._extra?.market_cap?.usd ?? null;
        const vol = md.total_volume?.usd ?? d?._extra?.total_volume?.usd ?? null;
        const circ = md.circulating_supply ?? d?._extra?.circulating_supply ?? null;

        const usdEl=q('#p_usd'), chEl=q('#p_ch'), capEl=q('#p_mcap'), volEl=q('#p_vol'), circEl=q('#p_circ');

        if(usdEl) usdEl.textContent = price!=null ? (price < 0.01 ? fmtUSD(price, {maxFrac:8}) : fmtUSD(price, {maxFrac:4})) : '—';
        if(chEl) { if (ch!=null && Number.isFinite(Number(ch))) { const v=Number(ch); chEl.textContent=(v>=0?'+':'')+v.toFixed(2)+'%'; chEl.className = v>=0 ? 'good' : 'bad'; } else { chEl.textContent='—'; chEl.className=''; } }
        if(capEl) capEl.textContent = fmtUSD(cap);
        if(volEl) volEl.textContent = fmtUSD(vol);
        if(circEl) circEl.textContent = circ!=null ? (fmtNum(Number(circ))+' DOGEC') : '—';

        setStatus('priceStatus','Live price loaded.');
      }catch(e){
        console.warn('Dashboard load failed', e);
        setStatus('priceStatus','Could not load price (rate limit or offline). Showing placeholders.', true);
      }
    }

    function trustBadge(score){ const s=(score||'').toLowerCase(); return `<span class="trust-badge ${s}">${score ? s : '—'}</span>`; }
    function ensureStakeCubeRows(tbody){
      const urlBTC = "https://stakecube.net/app/exchange/doge_btc";
      const hasRow = Array.from(tbody.querySelectorAll('tr')).some(tr => tr.textContent.toLowerCase().includes('stakecube'));
      if (!hasRow) tbody.insertAdjacentHTML("beforeend", `<tr><td>StakeCube</td><td>DOGEC/BTC</td><td>—</td><td>—</td><td>${trustBadge('')}</td><td><a href="${urlBTC}" target="_blank" rel="noopener noreferrer">Trade</a></td></tr>`);
    }

    async function loadMarkets(){
      if (document.hidden || !navigator.onLine) return;
      const tbody=q('#marketsTable tbody'); if(!tbody) return;
      const note=q('#marketsNote');
      tbody.setAttribute('aria-busy','true');
      try{
        const res = await getJSON(`${base}/coins/${id}/tickers?include_exchange_logo=true`, { ttlMs: 120_000, retries: 2 });
        const rows = (res.tickers || [])
          .filter(t => ['BTC','USDT','USD'].includes(t.target))
          .map(t => {
            const ex=t.market?.name||'—';
            const pair=`${t.base}/${t.target}`;
            const price = t.converted_last?.usd ?? (t.last ?? null);
            const spread=t.bid_ask_spread_percentage;
            const trust=t.trust_score||'';
            const url=t.trade_url || t.url || '#';
            return {ex,pair,price,spread,trust,url};
          })
          .filter((r, i, a) => a.findIndex(x => x.ex===r.ex && x.pair===r.pair) === i)
          .slice(0,25);

        if(!rows.length){
          tbody.innerHTML='<tr><td colspan="6" class="muted">No live markets available right now.</td></tr>';
          setStatus('marketsStatus','No markets returned by API. Added StakeCube fallback row.');
        } else {
          tbody.innerHTML=rows.map(r=>`<tr>
            <td>${r.ex}</td>
            <td>${r.pair}</td>
            <td>${(r.price!=null && Number.isFinite(Number(r.price)))?('$'+Number(r.price).toFixed(8)):'—'}</td>
            <td>${(r.spread!=null && Number.isFinite(Number(r.spread)))?Number(r.spread).toFixed(2)+'%':'—'}</td>
            <td>${trustBadge(r.trust)}</td>
            <td><a href="${r.url}" target="_blank" rel="noopener noreferrer">Trade</a></td>
          </tr>`).join('');
          setStatus('marketsStatus','Live markets loaded.');
        }
        if (note) note.textContent = 'Data via CoinGecko tickers. Always verify liquidity, spreads, and official communities before trading.';
      }catch(e){
        console.warn('Markets load failed', e);
        tbody.innerHTML='<tr><td colspan="6" class="muted">Failed to load from CoinGecko. Try again shortly.</td></tr>';
        setStatus('marketsStatus','Could not load markets (rate limit or offline). Showing fallback.', true);
      } finally {
        tbody.setAttribute('aria-busy','false');
        try { ensureStakeCubeRows(tbody); } catch(e) {}
      }
    }

    // Polling control with Save-Data friendliness
    let priceInterval, marketsInterval;
    function startPolling() {
      stopPolling(); loadDashboard(); loadMarkets();
      const priceMs = SAVE_DATA ? 300000 : 180000;
      const marketMs = SAVE_DATA ? 420000 : 300000;
      priceInterval = setInterval(loadDashboard, priceMs);
      marketsInterval = setInterval(loadMarkets, marketMs);
    }
    function stopPolling() { clearInterval(priceInterval); clearInterval(marketsInterval); }
    document.addEventListener('visibilitychange', () => { if (document.hidden || !navigator.onLine) stopPolling(); else startPolling(); });
    window.addEventListener('online',  () => { setStatus('priceStatus','Back online. Refreshing…'); startPolling(); });
    window.addEventListener('offline', () => { setStatus('priceStatus','You are offline. Live data paused.', true); stopPolling(); });
    if (navigator.onLine) startPolling();
    setInterval(()=>{ const tb=q('#marketsTable tbody'); if(tb){ try{ ensureStakeCubeRows(tb); }catch(e){} } }, 15000);

    // ===== Blog loader =====
    function timeAgo(dateStr) {
      const d = new Date(dateStr); if (isNaN(d)) return dateStr;
      const seconds = Math.floor((Date.now() - d.getTime()) / 1000);
      const rtf = new Intl.RelativeTimeFormat(undefined, { numeric: 'auto' });
      const thresholds = [['year',31536000],['month',2592000],['week',604800],['day',86400],['hour',3600],['minute',60],['second',1]];
      for (const [unit, secs] of thresholds) { const val=Math.floor(seconds/secs); if (Math.abs(val)>=1) return rtf.format(-val, unit); }
      return 'just now';
    }
    function renderBlog(posts){
      const list=q('#blogList'); if (!list) return;
      if(Array.isArray(posts) && posts.length){
        list.innerHTML=posts.map(p=>`<div class="post"><h3>${p.title}</h3><p>${p.summary}</p><time datetime="${p.date}">${p.date} (${timeAgo(p.date)})</time></div>`).join('');
      } else list.innerHTML='<div class="muted">No posts yet.</div>';
    }
    async function loadBlog(){
      const list=q('#blogList'); if (!list) return;
      setStatus('blogStatus','Fetching posts…');
      try{
        const blogUrl = new URL('blog.json', window.location.href).toString();
        const posts=await getJSON(blogUrl, { ttlMs: 300_000 });
        renderBlog(posts); setStatus('blogStatus','Posts loaded.'); return;
      }catch(e){ console.warn('Blog JSON load failed', e); setStatus('blogStatus','Could not load posts. Showing fallback.', true); }
      try{
        const raw=q('#blog-inline')?.textContent || '[]'; const posts=JSON.parse(raw);
        renderBlog(posts); setStatus('blogStatus','Fallback posts shown.');
      }catch(e){ list.innerHTML='<div class="muted">No posts yet.</div>'; setStatus('blogStatus','Could not parse fallback posts.', true); }
    }
    loadBlog();

    // ===== Copy-to-clipboard for checksums =====
    (function initChecksumCopy(){
      const cells = qa('#shaTable td:nth-child(2)');
      cells.forEach(td => {
        td.style.cursor='pointer'; td.title='Click to copy checksum'; td.setAttribute('role','button'); td.setAttribute('tabindex','0');
        const copy = async () => {
          const text = td.textContent.trim();
          try { await navigator.clipboard.writeText(text); td.classList.add('copied'); const prev=td.title; td.title='Copied!'; setTimeout(()=>{ td.classList.remove('copied'); td.title=prev; }, 900); }
          catch { alert('Copy failed — please copy manually.'); }
        };
        td.addEventListener('click', copy);
        td.addEventListener('keydown', e => { if (e.key==='Enter'||e.key===' ') { e.preventDefault(); copy(); } });
      });
    })();

    // ===== Share links builder (+ native share fallback) =====
    (function initShare(){
      const url = location.href.split('#')[0]; const title = document.title; const text = `Check out DOGECASH — ${title}`; const enc = encodeURIComponent;
      const links = {
        facebook: `https://www.facebook.com/sharer/sharer.php?u=${enc(url)}`,
        twitter:  `https://x.com/intent/post?text=${enc(text)}&url=${enc(url)}`,
        telegram: `https://t.me/share/url?url=${enc(url)}&text=${enc(text)}`,
        whatsapp: `https://wa.me/?text=${enc(text + ' ' + url)}`
      };
      const setHref = (id, href) => { const a=q('#'+id); if (a) a.href=href; };
      setHref('share-facebook', links.facebook); setHref('share-twitter', links.twitter);
      setHref('share-telegram', links.telegram); setHref('share-whatsapp', links.whatsapp);

      function wireNative(id, shareData){
        const a=q('#'+id); if(!a) return;
        a.addEventListener('click', (e)=>{
          if(navigator.share){
            e.preventDefault();
            navigator.share(shareData).catch(()=>{ window.open(a.href, '_blank', 'noopener,noreferrer'); });
          }
        });
      }
      const data = { title, text, url }; ['share-facebook','share-twitter','share-telegram','share-whatsapp'].forEach(id => wireNative(id, data));
    })();

    // ===== Tutorials placeholders =====
    document.addEventListener('click', (e) => {
      const b = e.target.closest('[data-tutorial]'); if (!b) return;
      const which = b.getAttribute('data-tutorial');
      alert((which==='install'?'Install & Verify':'Staking Basics') + ' — video coming soon!');
    });

    // ===== Meme gallery placeholders =====
    (function(){
      const grid = q('#memeGrid'); if (!grid) return;
      const files = ['assets/memes/meme1.svg','assets/memes/meme2.svg','assets/memes/meme3.svg'];
      grid.innerHTML = files.map(src => `<button class="m" aria-label="Open meme"><img src="${src}" loading="lazy" alt="DogeCash meme placeholder"/></button>`).join('');
      const lb = document.createElement('div'); lb.className='meme-lightbox'; lb.innerHTML=`<img alt="Meme preview"><span class="visually-hidden">Close</span>`;
      document.body.appendChild(lb); const img = lb.querySelector('img');
      grid.addEventListener('click', e => { const btn = e.target.closest('.m'); if (!btn) return; img.src = btn.querySelector('img').src; lb.classList.add('open'); });
      lb.addEventListener('click', () => lb.classList.remove('open'));
      document.addEventListener('keydown', e => { if (e.key === 'Escape') lb.classList.remove('open'); });
    })();

    // ===== Particles init (after script loads) =====
    window.addEventListener('load', () => {
      if (window.particlesJS) {
        particlesJS("particles-js", {
          "particles": {
            "number": { "value": 45 },
            "color": { "value": "#6bdcff" },
            "shape": { "type": "circle" },
            "opacity": { "value": 0.3 },
            "size": { "value": 3 },
            "line_linked": {
              "enable": true,
              "distance": 130,
              "color": "#6bdcff",
              "opacity": 0.25,
              "width": 1
            },
            "move": { "enable": true, "speed": 1 }
          },
          "interactivity": {
            "events": { "onhover": { "enable": true, "mode": "repulse" } },
            "modes": { "repulse": { "distance": 100 } }
          },
          "retina_detect": true
        });
      }
    });

    // ===== Service Worker (optional local file) =====
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js').catch(()=>{ /* no-op */ });
      });
    }
  </script>
</body>
</html>
